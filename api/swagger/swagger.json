{
    "swagger": "2.0",
    "info": {
        "contact": {}
    },
    "paths": {
        "/": {
            "get": {
                "description": "Welcome message for Multitenant DB API",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "root"
                ],
                "summary": "Root welcome",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    }
                }
            }
        },
        "/api/databases": {
            "get": {
                "description": "List, create, or delete tenant databases",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "databases"
                ],
                "summary": "Manage tenant databases",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Tenant idx (for DELETE)",
                        "name": "idx",
                        "in": "query"
                    },
                    {
                        "description": "Create database request (for POST)",
                        "name": "request",
                        "in": "body",
                        "schema": {
                            "$ref": "#/definitions/api.CreateDatabaseRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List/Delete success",
                        "schema": {
                            "$ref": "#/definitions/api.DatabaseResponse"
                        }
                    },
                    "201": {
                        "description": "Create success",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "405": {
                        "description": "Method not allowed",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "500": {
                        "description": "Internal error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            },
            "post": {
                "description": "List, create, or delete tenant databases",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "databases"
                ],
                "summary": "Manage tenant databases",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Tenant idx (for DELETE)",
                        "name": "idx",
                        "in": "query"
                    },
                    {
                        "description": "Create database request (for POST)",
                        "name": "request",
                        "in": "body",
                        "schema": {
                            "$ref": "#/definitions/api.CreateDatabaseRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List/Delete success",
                        "schema": {
                            "$ref": "#/definitions/api.DatabaseResponse"
                        }
                    },
                    "201": {
                        "description": "Create success",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "405": {
                        "description": "Method not allowed",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "500": {
                        "description": "Internal error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            },
            "delete": {
                "description": "List, create, or delete tenant databases",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "databases"
                ],
                "summary": "Manage tenant databases",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Tenant idx (for DELETE)",
                        "name": "idx",
                        "in": "query"
                    },
                    {
                        "description": "Create database request (for POST)",
                        "name": "request",
                        "in": "body",
                        "schema": {
                            "$ref": "#/definitions/api.CreateDatabaseRequest"
                        }
                    }
                ],
                "responses": {
                    "200": {
                        "description": "List/Delete success",
                        "schema": {
                            "$ref": "#/definitions/api.DatabaseResponse"
                        }
                    },
                    "201": {
                        "description": "Create success",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "400": {
                        "description": "Bad request",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "405": {
                        "description": "Method not allowed",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    },
                    "500": {
                        "description": "Internal error",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/info": {
            "get": {
                "description": "Returns API and protocol information",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "info"
                ],
                "summary": "API info",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "type": "object",
                            "additionalProperties": true
                        }
                    }
                }
            }
        },
        "/api/v1/query-logs/tenants": {
            "get": {
                "description": "Get a list of all tenants that have query logs",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "query-logs"
                ],
                "summary": "List tenants with query logs",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.TenantsResponse"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/tenants/{tenant_id}/query-logs": {
            "get": {
                "description": "Retrieve query logs for a specific tenant with optional pagination and time filtering",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "query-logs"
                ],
                "summary": "Get query logs for a tenant",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Tenant ID",
                        "name": "tenant_id",
                        "in": "path",
                        "required": true
                    },
                    {
                        "type": "integer",
                        "description": "Page number (default: 1)",
                        "name": "page",
                        "in": "query"
                    },
                    {
                        "type": "integer",
                        "description": "Page size (default: 50, max: 1000)",
                        "name": "page_size",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "Start time filter (RFC3339 format)",
                        "name": "start_time",
                        "in": "query"
                    },
                    {
                        "type": "string",
                        "description": "End time filter (RFC3339 format)",
                        "name": "end_time",
                        "in": "query"
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.QueryLogResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    }
                }
            }
        },
        "/api/v1/tenants/{tenant_id}/query-stats": {
            "get": {
                "description": "Retrieve query execution statistics for a specific tenant",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "query-logs"
                ],
                "summary": "Get query log statistics for a tenant",
                "parameters": [
                    {
                        "type": "string",
                        "description": "Tenant ID",
                        "name": "tenant_id",
                        "in": "path",
                        "required": true
                    }
                ],
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.QueryLogStatsResponse"
                        }
                    },
                    "400": {
                        "description": "Bad Request",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    },
                    "500": {
                        "description": "Internal Server Error",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    }
                }
            }
        },
        "/health": {
            "get": {
                "description": "Returns server health status",
                "produces": [
                    "application/json"
                ],
                "tags": [
                    "health"
                ],
                "summary": "Health check",
                "responses": {
                    "200": {
                        "description": "OK",
                        "schema": {
                            "$ref": "#/definitions/api.Response"
                        }
                    }
                }
            }
        }
    },
    "definitions": {
        "api.CreateDatabaseRequest": {
            "type": "object",
            "properties": {
                "idx": {
                    "type": "string"
                }
            }
        },
        "api.DatabaseInfo": {
            "type": "object",
            "properties": {
                "idx": {
                    "type": "string"
                },
                "name": {
                    "type": "string"
                }
            }
        },
        "api.DatabaseResponse": {
            "type": "object",
            "properties": {
                "databases": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/api.DatabaseInfo"
                    }
                },
                "status": {
                    "type": "string"
                },
                "timestamp": {
                    "type": "string"
                }
            }
        },
        "api.QueryLogEntry": {
            "type": "object",
            "properties": {
                "connection_id": {
                    "type": "string"
                },
                "duration_ms": {
                    "type": "integer"
                },
                "error_message": {
                    "type": "string"
                },
                "executed_at": {
                    "type": "string"
                },
                "id": {
                    "type": "integer"
                },
                "query": {
                    "type": "string"
                },
                "success": {
                    "type": "boolean"
                },
                "tenant_id": {
                    "type": "string"
                }
            }
        },
        "api.QueryLogResponse": {
            "type": "object",
            "properties": {
                "logs": {
                    "type": "array",
                    "items": {
                        "$ref": "#/definitions/api.QueryLogEntry"
                    }
                },
                "page": {
                    "type": "integer"
                },
                "page_size": {
                    "type": "integer"
                },
                "status": {
                    "type": "string"
                },
                "timestamp": {
                    "type": "string"
                },
                "total": {
                    "type": "integer"
                }
            }
        },
        "api.QueryLogStatsResponse": {
            "type": "object",
            "properties": {
                "stats": {
                    "type": "object",
                    "additionalProperties": true
                },
                "status": {
                    "type": "string"
                },
                "timestamp": {
                    "type": "string"
                }
            }
        },
        "api.Response": {
            "type": "object",
            "properties": {
                "message": {
                    "type": "string"
                },
                "status": {
                    "type": "string"
                },
                "timestamp": {
                    "type": "string"
                }
            }
        },
        "api.TenantsResponse": {
            "type": "object",
            "properties": {
                "status": {
                    "type": "string"
                },
                "tenants": {
                    "type": "array",
                    "items": {
                        "type": "string"
                    }
                },
                "timestamp": {
                    "type": "string"
                }
            }
        }
    }
}